import tkinter as tk
from tkinter import ttk, messagebox, simpledialog, scrolledtext, filedialog
import json
import os
import datetime
import random
from PIL import Image, ImageTk
import threading
import time


class SistemaAcademico:
    def __init__(self):
        self.usuarios = {}
        self.mensagens = []
        self.notas = {}
        self.eventos = []
        self.arquivos = {}
        self.usuario_logado = None
        self.carregar_dados()
        
     
        self.temas = {
            "Claro": {"bg": "#ffffff", "fg": "#000000", "button_bg": "#4CAF50", "button_fg": "white"},
            "Escuro": {"bg": "#2c3e50", "fg": "#ecf0f1", "button_bg": "#3498db", "button_fg": "white"},
            "Azul": {"bg": "#e8f4f8", "fg": "#2c3e50", "button_bg": "#2980b9", "button_fg": "white"}
        }
        self.tema_atual = "Claro"

    def carregar_dados(self):
        try:
            if os.path.exists("dados_academicos.json"):
                with open("dados_academicos.json", "r", encoding='utf-8') as f:
                    data = json.load(f)
                    self.usuarios = data.get("usuarios", {})
                    self.mensagens = data.get("mensagens", [])
                    self.notas = data.get("notas", {})
                    self.eventos = data.get("eventos", [])
                    self.arquivos = data.get("arquivos", {})
        except Exception as e:
            
            try:
                messagebox.showerror("Erro", f"Erro ao carregar dados: {e}")
            except:
                print("Erro ao carregar dados:", e)

    def salvar_dados(self):
        try:
            with open("dados_academicos.json", "w", encoding='utf-8') as f:
                json.dump({
                    "usuarios": self.usuarios,
                    "mensagens": self.mensagens,
                    "notas": self.notas,
                    "eventos": self.eventos,
                    "arquivos": self.arquivos
                }, f, ensure_ascii=False, indent=2)
        except Exception as e:
            try:
                messagebox.showerror("Erro", f"Erro ao salvar dados: {e}")
            except:
                print("Erro ao salvar dados:", e)


sistema = SistemaAcademico()


MATERIAIS = {
    "python": {
        "livros": ["Python Crash Course", "Fluent Python", "Automate the Boring Stuff"],
        "cursos": ["Python para Iniciantes", "Data Science com Python", "Web Development Django"],
        "artigos": ["Estruturas de Dados", "OOP em Python", "Testes Unit√°rios"]
    },
    "ia": {
        "livros": ["Hands-On Machine Learning", "Deep Learning", "Pattern Recognition"],
        "cursos": ["Machine Learning B√°sico", "Deep Learning Avan√ßado", "NLP com Python"],
        "artigos": ["Redes Neurais Convolucionais", "Algoritmos Gen√©ticos", "Reinforcement Learning"]
    },
    "matematica": {
        "livros": ["C√°lculo I", "√Ålgebra Linear", "Estat√≠stica Aplicada"],
        "cursos": ["C√°lculo Diferencial", "√Ålgebra para CS", "Probabilidade"],
        "artigos": ["Teoria dos Grafos", "Otimiza√ß√£o Matem√°tica", "An√°lise Num√©rica"]
    }
}

RESPOSTAS_IA = {
    "como estudar": "üìö Crie um cronograma de estudos, use a t√©cnica Pomodoro (25min estudo, 5min descanso) e revise regularmente.",
    "python": "üêç Python √© excelente para iniciantes! Pratique com projetos pequenos e participe de comunidades como PyLadies.",
    "ia": "ü§ñ IA envolve Machine Learning, Deep Learning e NLP. Comece com regress√£o linear e evolua para redes neurais.",
    "matematica": "üßÆ Matem√°tica √© fundamental! Foque em √°lgebra, c√°lculo, estat√≠stica e l√≥gica matem√°tica.",
    "prova": "üìù Para provas: revise os conceitos principais, resolva exerc√≠cios anteriores e descanse bem antes.",
    "tcc": "üéì Para TCC: defina um tema claro, fa√ßa um cronograma rigoroso e busque orienta√ß√£o constante.",
    "estagio": "üíº Est√°gio: atualize seu LinkedIn, prepare um bom curr√≠culo e pratique entrevistas."
}


def validar_email(email):
    return '@' in email and '.' in email.split('@')[-1]

def validar_senha(senha):
    return len(senha) >= 6

def cadastrar_usuario():
    nome = simpledialog.askstring("Cadastro", "Digite seu nome completo:")
    if not nome:
        return
        
    email = simpledialog.askstring("Cadastro", "Digite seu email:")
    if not email or not validar_email(email):
        messagebox.showwarning("Erro", "Email inv√°lido!")
        return
        
    senha = simpledialog.askstring("Cadastro", "Digite sua senha (m√≠nimo 6 caracteres):", show="*")
    if not senha or not validar_senha(senha):
        messagebox.showwarning("Erro", "Senha deve ter pelo menos 6 caracteres!")
        return
        
    perfil = simpledialog.askstring("Cadastro", "Perfil (aluno/professor/administrador):")
    if perfil not in ["aluno", "professor", "administrador"]:
        messagebox.showwarning("Erro", "Perfil deve ser: aluno, professor ou administrador!")
        return

    if email in sistema.usuarios:
        messagebox.showwarning("Erro", "Usu√°rio j√° cadastrado!")
    else:
        sistema.usuarios[email] = {
            "nome": nome,
            "senha": senha,
            "perfil": perfil,
            "data_cadastro": datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
            "ultimo_login": None
        }
        messagebox.showinfo("Sucesso", f"Usu√°rio {nome} cadastrado com sucesso!")
        sistema.salvar_dados()
        atualizar_interface()

def login():
    email = simpledialog.askstring("Login", "Digite seu email:")
    senha = simpledialog.askstring("Login", "Digite sua senha:", show="*")

    if email in sistema.usuarios and sistema.usuarios[email]["senha"] == senha:
        sistema.usuario_logado = email
        sistema.usuarios[email]["ultimo_login"] = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        messagebox.showinfo("Bem-vindo", f"Ol√°, {sistema.usuarios[email]['nome']}!\nPerfil: {sistema.usuarios[email]['perfil'].capitalize()}")
        sistema.salvar_dados()
        atualizar_interface()
    else:
        messagebox.showerror("Erro", "Email ou senha inv√°lidos!")

def logout():
    sistema.usuario_logado = None
    messagebox.showinfo("Logout", "Voc√™ saiu da sua conta.")
    atualizar_interface()

def postar_mensagem():
    if not sistema.usuario_logado:
        messagebox.showwarning("Acesso negado", "Voc√™ precisa fazer login primeiro!")
        return
        
    msg = simpledialog.askstring("F√≥rum", "Digite sua mensagem:")
    if msg:
        timestamp = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        mensagem_completa = f"[{timestamp}] {sistema.usuarios[sistema.usuario_logado]['nome']}: {msg}"
        sistema.mensagens.append(mensagem_completa)
        messagebox.showinfo("Sucesso", "Mensagem postada no f√≥rum!")
        sistema.salvar_dados()
        atualizar_interface()

def ver_forum():
    if not sistema.mensagens:
        messagebox.showinfo("F√≥rum", "Nenhuma mensagem ainda.")
    else:
        janela_forum = tk.Toplevel(root)
        janela_forum.title("F√≥rum Acad√™mico - Todas as Mensagens")
        janela_forum.geometry("600x400")
        
        texto = scrolledtext.ScrolledText(janela_forum, wrap=tk.WORD, width=70, height=20)
        texto.pack(padx=10, pady=10, fill=tk.BOTH, expand=True)
        
        for msg in sistema.mensagens:
            texto.insert(tk.END, msg + "\n" + "-"*50 + "\n")
        
        texto.config(state=tk.DISABLED)

def ver_minhas_mensagens():
    if not sistema.usuario_logado:
        messagebox.showwarning("Acesso negado", "Voc√™ precisa fazer login primeiro!")
        return
        
    nome_usuario = sistema.usuarios[sistema.usuario_logado]['nome']
    minhas_mensagens = [msg for msg in sistema.mensagens if nome_usuario in msg]
    
    if not minhas_mensagens:
        messagebox.showinfo("Minhas Mensagens", "Voc√™ ainda n√£o postou mensagens.")
    else:
        janela = tk.Toplevel(root)
        janela.title("Minhas Mensagens")
        janela.geometry("500x300")
        
        texto = scrolledtext.ScrolledText(janela, wrap=tk.WORD, width=60, height=15)
        texto.pack(padx=10, pady=10, fill=tk.BOTH, expand=True)
        
        for msg in minhas_mensagens:
            texto.insert(tk.END, msg + "\n" + "="*50 + "\n")
        
        texto.config(state=tk.DISABLED)

def chat_ia():
    pergunta = simpledialog.askstring("Assistente I.A", "Digite sua d√∫vida ou assunto:")
    if not pergunta:
        return

    pergunta = pergunta.lower()
    
   
    resposta = "ü§ñ Estou aqui para ajudar! Aqui est√£o algumas dicas gerais:\n\n"
    resposta += "‚Ä¢ Organize seu tempo de estudo\n"
    resposta += "‚Ä¢ Participe ativamente das discuss√µes\n"
    resposta += "‚Ä¢ N√£o hesite em pedir ajuda\n"
    resposta += "‚Ä¢ Revise o material regularmente\n\n"
    
    for chave in RESPOSTAS_IA:
        if chave in pergunta:
            resposta = RESPOSTAS_IA[chave]
            break
            
    
    if "python" in pergunta:
        resposta += "\n\nüìö Recomenda√ß√µes Python:\n"
        resposta += "‚Ä¢ Livro: Python Crash Course\n"
        resposta += "‚Ä¢ Curso: Python para Iniciantes\n"
        resposta += "‚Ä¢ Projeto: Crie um jogo simples"
    
    messagebox.showinfo("Assistente I.A Acad√™mico", resposta)

def recomendar_materiais():
    areas = list(MATERIAIS.keys())
    area = simpledialog.askstring("Recomenda√ß√µes", f"Digite a √°rea ({', '.join(areas)}):")
    
    if area and area.lower() in MATERIAIS:
        material = MATERIAIS[area.lower()]
        texto = f"üìö Materiais para {area.upper()}:\n\n"
        
        texto += "üìñ LIVROS:\n"
        for livro in material['livros']:
            texto += f"‚Ä¢ {livro}\n"
            
        texto += "\nüéì CURSOS:\n"
        for curso in material['cursos']:
            texto += f"‚Ä¢ {curso}\n"
            
        texto += "\nüìÑ ARTIGOS:\n"
        for artigo in material['artigos']:
            texto += f"‚Ä¢ {artigo}\n"
            
        messagebox.showinfo("Materiais Recomendados", texto)
    else:
        messagebox.showerror("Erro", f"√Årea n√£o encontrada. Tente: {', '.join(areas)}")

def gerenciar_notas():
    if not sistema.usuario_logado or sistema.usuarios[sistema.usuario_logado]['perfil'] not in ['professor', 'administrador']:
        messagebox.showwarning("Acesso negado", "Apenas professores e administradores podem gerenciar notas!")
        return
        
    janela = tk.Toplevel(root)
    janela.title("Sistema de Notas")
    janela.geometry("400x300")
    
    tk.Label(janela, text="Sistema de Gest√£o de Notas", font=("Arial", 14)).pack(pady=10)
    
    tk.Button(janela, text="Adicionar Nota", command=adicionar_nota, width=20).pack(pady=5)
    tk.Button(janela, text="Consultar Notas", command=consultar_notas, width=20).pack(pady=5)
    tk.Button(janela, text="Estat√≠sticas", command=estatisticas_notas, width=20).pack(pady=5)

def adicionar_nota():
    aluno = simpledialog.askstring("Notas", "Email do aluno:")
    if aluno not in sistema.usuarios:
        messagebox.showerror("Erro", "Aluno n√£o encontrado!")
        return
        
    disciplina = simpledialog.askstring("Notas", "Disciplina:")
    nota = simpledialog.askfloat("Notas", "Nota (0-10):")
    
    if nota is None:
        return
    if nota < 0 or nota > 10:
        messagebox.showerror("Erro", "Nota deve estar entre 0 e 10!")
        return
        
    if aluno not in sistema.notas:
        sistema.notas[aluno] = []
        
    sistema.notas[aluno].append({
        "disciplina": disciplina,
        "nota": nota,
        "data": datetime.datetime.now().strftime("%Y-%m-%d"),
        "professor": sistema.usuarios[sistema.usuario_logado]['nome']
    })
    
    messagebox.showinfo("Sucesso", f"Nota {nota} adicionada para {sistema.usuarios[aluno]['nome']}!")
    sistema.salvar_dados()
    atualizar_interface()

def consultar_notas():
    if sistema.usuario_logado:
        aluno = sistema.usuario_logado
        if aluno in sistema.notas:
            texto = f"üìä Notas de {sistema.usuarios[aluno]['nome']}:\n\n"
            for nota_info in sistema.notas[aluno]:
                texto += f"üìù {nota_info['disciplina']}: {nota_info['nota']} ({nota_info['data']})\n"
            messagebox.showinfo("Suas Notas", texto)
        else:
            messagebox.showinfo("Notas", "Nenhuma nota registrada ainda.")
    else:
        messagebox.showwarning("Acesso negado", "Fa√ßa login para ver suas notas!")

def estatisticas_notas():
    if not sistema.notas:
        messagebox.showinfo("Estat√≠sticas", "Nenhuma nota registrada ainda.")
        return
        
    total_notas = sum(len(notas) for notas in sistema.notas.values())
    media_geral = sum(nota_info['nota'] for notas in sistema.notas.values() for nota_info in notas) / total_notas
    
    texto = f"üìà Estat√≠sticas de Notas:\n\n"
    texto += f"‚Ä¢ Total de notas: {total_notas}\n"
    texto += f"‚Ä¢ M√©dia geral: {media_geral:.2f}\n"
    texto += f"‚Ä¢ Alunos com notas: {len(sistema.notas)}\n"
    
    messagebox.showinfo("Estat√≠sticas", texto)

def calendario_academico():
    janela = tk.Toplevel(root)
    janela.title("Calend√°rio Acad√™mico")
    janela.geometry("400x300")
    
   
    eventos = [
        {"data": "2024-03-15", "evento": "In√≠cio do Semestre"},
        {"data": "2024-04-20", "evento": "Prova Bimestral"},
        {"data": "2024-06-15", "evento": "Recesso Acad√™mico"},
        {"data": "2024-07-20", "evento": "T√©rmino do Semestre"}
    ]
    
    texto = scrolledtext.ScrolledText(janela, wrap=tk.WORD, width=40, height=15)
    texto.pack(padx=10, pady=10, fill=tk.BOTH, expand=True)
    
    texto.insert(tk.END, "üìÖ CALEND√ÅRIO ACAD√äMICO\n\n")
    for evento in eventos:
        texto.insert(tk.END, f"üìå {evento['data']}: {evento['evento']}\n")
    
    texto.config(state=tk.DISABLED)

def upload_arquivo():
    if not sistema.usuario_logado:
        messagebox.showwarning("Acesso negado", "Fa√ßa login para upload de arquivos!")
        return
        
    arquivo = filedialog.askopenfilename(
        title="Selecionar Arquivo",
        filetypes=[("Todos os arquivos", "*.*"), ("PDF", "*.pdf"), ("Documentos", "*.docx *.txt")]
    )
    
    if arquivo:
        nome_arquivo = os.path.basename(arquivo)
        sistema.arquivos[nome_arquivo] = {
            "usuario": sistema.usuario_logado,
            "data_upload": datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
            "tamanho": os.path.getsize(arquivo)
        }
        messagebox.showinfo("Sucesso", f"Arquivo '{nome_arquivo}' enviado com sucesso!")
        sistema.salvar_dados()
        atualizar_interface()

def visualizar_arquivos():
    if not sistema.arquivos:
        messagebox.showinfo("Arquivos", "Nenhum arquivo enviado ainda.")
        return
        
    janela = tk.Toplevel(root)
    janela.title("Arquivos Compartilhados")
    janela.geometry("500x300")
    
    texto = scrolledtext.ScrolledText(janela, wrap=tk.WORD, width=60, height=15)
    texto.pack(padx=10, pady=10, fill=tk.BOTH, expand=True)
    
    texto.insert(tk.END, "üìÅ ARQUIVOS COMPARTILHADOS\n\n")
    for nome_arquivo, info in sistema.arquivos.items():
        usuario = sistema.usuarios.get(info['usuario'], {}).get('nome', info['usuario'])
        texto.insert(tk.END, f"üìÑ {nome_arquivo}\n")
        texto.insert(tk.END, f"   üë§ Enviado por: {usuario}\n")
        texto.insert(tk.END, f"   üìÖ Data: {info['data_upload']}\n")
        texto.insert(tk.END, f"   üìä Tamanho: {info['tamanho']} bytes\n")
        texto.insert(tk.END, "-"*50 + "\n")
    
    texto.config(state=tk.DISABLED)

def dashboard_usuario():
    if not sistema.usuario_logado:
        messagebox.showwarning("Acesso negado", "Fa√ßa login para acessar o dashboard!")
        return
        
    usuario = sistema.usuarios[sistema.usuario_logado]
    janela = tk.Toplevel(root)
    janela.title("Dashboard Pessoal")
    janela.geometry("400x300")
    
    texto = f"üë§ DASHBOARD - {usuario['nome'].upper()}\n\n"
    texto += f"üìß Email: {sistema.usuario_logado}\n"
    texto += f"üéØ Perfil: {usuario['perfil'].capitalize()}\n"
    texto += f"üìÖ Cadastro: {usuario['data_cadastro']}\n"
    texto += f"üîê √öltimo login: {usuario.get('ultimo_login', 'Nunca')}\n\n"
    
   
    if sistema.usuario_logado in sistema.notas:
        notas = sistema.notas[sistema.usuario_logado]
        media = sum(n['nota'] for n in notas) / len(notas)
        texto += f"üìä M√©dia das notas: {media:.2f}\n"
    
    mensagens_usuario = len([m for m in sistema.mensagens if usuario['nome'] in m])
    texto += f"üí¨ Mensagens no f√≥rum: {mensagens_usuario}\n"
    
    arquivos_usuario = len([a for a in sistema.arquivos.values() if a['usuario'] == sistema.usuario_logado])
    texto += f"üìÅ Arquivos enviados: {arquivos_usuario}\n"
    
    label = tk.Label(janela, text=texto, justify=tk.LEFT, font=("Arial", 10))
    label.pack(padx=20, pady=20)

def backup_dados():
    try:
        with open("backup_academico.json", "w", encoding='utf-8') as f:
            json.dump({
                "usuarios": sistema.usuarios,
                "mensagens": sistema.mensagens,
                "notas": sistema.notas,
                "eventos": sistema.eventos,
                "arquivos": sistema.arquivos
            }, f, ensure_ascii=False, indent=2)
        messagebox.showinfo("Backup", "Backup dos dados realizado com sucesso!")
    except Exception as e:
        messagebox.showerror("Erro", f"Falha no backup: {e}")

def restaurar_dados():
    try:
        arquivo = filedialog.askopenfilename(
            title="Selecionar Backup",
            filetypes=[("JSON files", "*.json")]
        )
        if arquivo:
            with open(arquivo, "r", encoding='utf-8') as f:
                data = json.load(f)
                sistema.usuarios = data.get("usuarios", {})
                sistema.mensagens = data.get("mensagens", [])
                sistema.notas = data.get("notas", {})
                sistema.eventos = data.get("eventos", {})
                sistema.arquivos = data.get("arquivos", {})
            messagebox.showinfo("Restaura√ß√£o", "Dados restaurados com sucesso!")
            sistema.salvar_dados()
            atualizar_interface()
    except Exception as e:
        messagebox.showerror("Erro", f"Falha na restaura√ß√£o: {e}")

def mudar_tema(novo_tema):
    if novo_tema not in sistema.temas:
        messagebox.showwarning("Tema inv√°lido", "Escolha um tema v√°lido.")
        return
    sistema.tema_atual = novo_tema
    atualizar_interface()


def _apply_theme_to_widget(widget, tema):
    """
    Tenta aplicar bg/fg nos widgets compat√≠veis.
    Funciona para tk widgets (Label, Frame, Button, Text/ScrolledText) e tenta para ttk via style.
    """
   
    try:
        classname = widget.winfo_class()
    except:
        return

    
    if isinstance(widget, scrolledtext.ScrolledText):
        try:
            widget.config(bg=tema["bg"], fg=tema["fg"], insertbackground=tema["fg"])
        except:
            pass
   
    elif isinstance(widget, tk.Text):
        try:
            widget.config(bg=tema["bg"], fg=tema["fg"], insertbackground=tema["fg"])
        except:
            pass
    
    else:
        try:
            if isinstance(widget, tk.Button):
                widget.configure(bg=tema["button_bg"], fg=tema["button_fg"], activebackground=tema["bg"])
            elif isinstance(widget, (tk.Label, tk.Frame, tk.Entry, tk.Listbox, tk.Canvas, tk.Checkbutton, tk.Radiobutton)):
                widget.configure(bg=tema["bg"], fg=tema["fg"])
            else:
               
                widget.configure(bg=tema["bg"], fg=tema.get("fg", "black"))
        except:
            
            pass

def atualizar_interface():
    """
    Atualiza cores/estilos da interface atual (chamar ap√≥s login/logout, troca de tema e quando abrir).
    """
    
    if 'root' not in globals():
        return

    tema = sistema.temas.get(sistema.tema_atual, sistema.temas["Claro"])

    
    try:
        root.configure(bg=tema["bg"])
    except:
        pass

    
    try:
        style = ttk.Style()
        
        try:
            style.theme_use("default")
        except:
            pass
        style.configure("TNotebook", background=tema["bg"])
        style.configure("TNotebook.Tab", background=tema["button_bg"], foreground=tema["button_fg"])
        style.configure("TFrame", background=tema["bg"])
        style.configure("TLabel", background=tema["bg"], foreground=tema["fg"])
    except:
        pass

    
    def recurse_apply(parent):
        for w in parent.winfo_children():
            _apply_theme_to_widget(w, tema)
           
            if isinstance(w, ttk.Notebook):
                try:
                    for i in range(w.index("end")):
                        w.tab(i, padding=6)
                except:
                    pass
            
            try:
                recurse_apply(w)
            except:
                pass

    recurse_apply(root)

    
    try:
        usuario_texto = sistema.usuarios[sistema.usuario_logado]['nome'] if sistema.usuario_logado else 'N√£o logado'
        status_text = f"Usu√°rio: {usuario_texto} | Total usu√°rios: {len(sistema.usuarios)} | Mensagens: {len(sistema.mensagens)}"
        status_label.config(text=status_text)
    except:
        pass


def criar_interface():
    global root, status_label, tema_var
    root = tk.Tk()
    root.title("Sistema Acad√™mico Colaborativo com I.A - Premium")
    root.geometry("500x600")
    root.configure(bg=sistema.temas[sistema.tema_atual]["bg"])
    
    
    header_frame = tk.Frame(root, bg=sistema.temas[sistema.tema_atual]["bg"])
    header_frame.pack(fill=tk.X, padx=20, pady=10)
    
    titulo = tk.Label(header_frame, 
                     text="üéì SISTEMA ACAD√äMICO PREMIUM", 
                     font=("Arial", 16, "bold"),
                     fg=sistema.temas[sistema.tema_atual]["fg"],
                     bg=sistema.temas[sistema.tema_atual]["bg"])
    titulo.pack(pady=5)
    
    subtitulo = tk.Label(header_frame,
                        text="Plataforma Colaborativa com Intelig√™ncia Artificial",
                        font=("Arial", 10),
                        fg="#666666",
                        bg=sistema.temas[sistema.tema_atual]["bg"])
    subtitulo.pack()
    
   
    tema_frame = tk.Frame(root, bg=sistema.temas[sistema.tema_atual]["bg"])
    tema_frame.pack(pady=5)
    
    tk.Label(tema_frame, text="Tema:", bg=sistema.temas[sistema.tema_atual]["bg"]).pack(side=tk.LEFT)
    tema_var = tk.StringVar(value=sistema.tema_atual)
    tema_combo = ttk.Combobox(tema_frame, textvariable=tema_var, values=list(sistema.temas.keys()), width=10, state="readonly")
    tema_combo.pack(side=tk.LEFT, padx=5)
    tema_combo.bind('<<ComboboxSelected>>', lambda e: mudar_tema(tema_var.get()))
    
    
    notebook = ttk.Notebook(root)
    notebook.pack(fill=tk.BOTH, expand=True, padx=10, pady=10)
    
   
    frame_principal = ttk.Frame(notebook)
    notebook.add(frame_principal, text="üè† Principal")
    
   
    frame_academico = ttk.Frame(notebook)
    notebook.add(frame_academico, text="üìö Acad√™mico")
    
    
    frame_admin = ttk.Frame(notebook)
    notebook.add(frame_admin, text="‚öôÔ∏è Administrativo")
    
    
    botoes_principal = [
        ("üë§ Cadastrar", cadastrar_usuario),
        ("üîê Login", login),
        ("üö™ Logout", logout),
        ("üí¨ Postar F√≥rum", postar_mensagem),
        ("üìã Ver F√≥rum", ver_forum),
        ("ü§ñ Assistente IA", chat_ia),
        ("üìä Dashboard", dashboard_usuario)
    ]
    
    for texto, comando in botoes_principal:
        btn = tk.Button(frame_principal, text=texto, command=comando, width=20, height=2,
                       bg=sistema.temas[sistema.tema_atual]["button_bg"],
                       fg=sistema.temas[sistema.tema_atual]["button_fg"],
                       font=("Arial", 10, "bold"))
        btn.pack(pady=5, padx=20, fill=tk.X)
    
   
    botoes_academico = [
        ("üìö Materiais", recomendar_materiais),
        ("üìù Minhas Mensagens", ver_minhas_mensagens),
        ("üìä Minhas Notas", consultar_notas),
        ("üìÖ Calend√°rio", calendario_academico),
        ("üìÅ Upload Arquivo", upload_arquivo),
        ("üìÇ Ver Arquivos", visualizar_arquivos)
    ]
    
    for texto, comando in botoes_academico:
        btn = tk.Button(frame_academico, text=texto, command=comando, width=20, height=2,
                       bg=sistema.temas[sistema.tema_atual]["button_bg"],
                       fg=sistema.temas[sistema.tema_atual]["button_fg"],
                       font=("Arial", 10, "bold"))
        btn.pack(pady=5, padx=20, fill=tk.X)
    
    
    botoes_admin = [
        ("üéØ Gerenciar Notas", gerenciar_notas),
        ("üìà Estat√≠sticas", estatisticas_notas),
        ("üíæ Backup", backup_dados),
        ("üîÑ Restaurar", restaurar_dados)
    ]
    
    for texto, comando in botoes_admin:
        btn = tk.Button(frame_admin, text=texto, command=comando, width=20, height=2,
                       bg=sistema.temas[sistema.tema_atual]["button_bg"],
                       fg=sistema.temas[sistema.tema_atual]["button_fg"],
                       font=("Arial", 10, "bold"))
        btn.pack(pady=5, padx=20, fill=tk.X)
    
    
    status_frame = tk.Frame(root, bg="#333333", height=20)
    status_frame.pack(fill=tk.X, side=tk.BOTTOM)
    
    status_text = f"Usu√°rio: {sistema.usuarios[sistema.usuario_logado]['nome'] if sistema.usuario_logado else 'N√£o logado'} | "
    status_text += f"Total usu√°rios: {len(sistema.usuarios)} | "
    status_text += f"Mensagens: {len(sistema.mensagens)}"
    
    status_label = tk.Label(status_frame, text=status_text, fg="white", bg="#333333", font=("Arial", 8))
    status_label.pack(side=tk.LEFT, padx=10)
    
   
    atualizar_interface()
    
    root.mainloop()

if __name__ == "__main__":
    criar_interface()
